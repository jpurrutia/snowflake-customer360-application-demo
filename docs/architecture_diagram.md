# Customer 360 Analytics Platform - Architecture Diagram

## System Architecture Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                    SNOWFLAKE DATA PLATFORM                                           â”‚
â”‚                                                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                â”‚
â”‚  â”‚              â”‚         â”‚              â”‚         â”‚              â”‚                                 â”‚
â”‚  â”‚   BRONZE     â”‚   â†’     â”‚    SILVER    â”‚   â†’     â”‚     GOLD     â”‚   â†’   ğŸ“Š Streamlit App         â”‚
â”‚  â”‚  (Raw Data)  â”‚         â”‚  (Staging)   â”‚         â”‚  (Analytics) â”‚                                 â”‚
â”‚  â”‚              â”‚         â”‚              â”‚         â”‚              â”‚                                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                â”‚
â”‚                                                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Detailed Data Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ² DATA GENERATION                                                                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  METHOD 1: Snowpark Stored Procedure (Customer Data)                                     â”‚    â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚    â”‚
â”‚  â”‚                                                                                          â”‚    â”‚
â”‚  â”‚  ğŸ“ BRONZE.GENERATE_CUSTOMERS(50000, 42)                                                 â”‚    â”‚
â”‚  â”‚     â€¢ Language: Python (Snowpark)                                                        â”‚    â”‚
â”‚  â”‚     â€¢ Packages: faker, numpy, pandas, snowflake-snowpark-python                          â”‚    â”‚
â”‚  â”‚     â€¢ Location: /snowflake/procedures/generate_customers.sql                             â”‚    â”‚
â”‚  â”‚                                                                                          â”‚    â”‚
â”‚  â”‚     GENERATION PROCESS:                                                                  â”‚    â”‚
â”‚  â”‚       1. Runs entirely within Snowflake (no external Python env needed)                  â”‚    â”‚
â”‚  â”‚       2. Uses Faker to generate realistic customer profiles                              â”‚    â”‚
â”‚  â”‚       3. Assigns behavioral segments (High-Value, Declining, etc.)                       â”‚    â”‚
â”‚  â”‚       4. Writes directly to BRONZE.RAW_CUSTOMERS via session.write_pandas()              â”‚    â”‚
â”‚  â”‚                                                                                          â”‚    â”‚
â”‚  â”‚     OUTPUT:                                                                              â”‚    â”‚
â”‚  â”‚       â€¢ 50,000 synthetic customer records                                                â”‚    â”‚
â”‚  â”‚       â€¢ Demographics, account details, card types                                        â”‚    â”‚
â”‚  â”‚       â€¢ Segment assignment with decline types                                            â”‚    â”‚
â”‚  â”‚                                                                                          â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  METHOD 2: S3 Bulk Load (Transaction Data)                                               â”‚    â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚    â”‚
â”‚  â”‚                                                                                          â”‚    â”‚
â”‚  â”‚  ğŸ“„ External Generation â†’ S3 Upload â†’ COPY INTO                                          â”‚    â”‚
â”‚  â”‚     â€¢ Source: transactions.csv.gz (GZIP compressed)                                      â”‚    â”‚
â”‚  â”‚     â€¢ Location: Amazon S3 bucket via external stage                                      â”‚    â”‚
â”‚  â”‚     â€¢ Load Script: /snowflake/load/load_transactions_bulk.sql                            â”‚    â”‚
â”‚  â”‚                                                                                          â”‚    â”‚
â”‚  â”‚     LOAD PROCESS:                                                                        â”‚    â”‚
â”‚  â”‚       1. Transaction CSV files uploaded to S3                                            â”‚    â”‚
â”‚  â”‚       2. External stage (@transaction_stage) configured                                  â”‚    â”‚
â”‚  â”‚       3. COPY INTO command loads from S3 to BRONZE.RAW_TRANSACTIONS                      â”‚    â”‚
â”‚  â”‚       4. Metadata captured (source_file, row_number)                                     â”‚    â”‚
â”‚  â”‚                                                                                          â”‚    â”‚
â”‚  â”‚     OUTPUT:                                                                              â”‚    â”‚
â”‚  â”‚       â€¢ ~13.5M transaction records                                                       â”‚    â”‚
â”‚  â”‚       â€¢ 18 months of purchase history                                                    â”‚    â”‚
â”‚  â”‚       â€¢ Multi-channel (Online, In-Store, Mobile)                                         â”‚    â”‚
â”‚  â”‚       â€¢ ~97% approved, ~3% declined                                                      â”‚    â”‚
â”‚  â”‚                                                                                          â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ¥‰ BRONZE SCHEMA - Raw Data Layer (dbt-Managed)                                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                                   â”‚
â”‚  ğŸ“‹ dbt Model: bronze.raw_customers      ğŸ“‹ dbt Model: bronze.raw_transactions                    â”‚
â”‚     â€¢ Loads from @customer_data_stage       â€¢ Loads from @transaction_stage_historical           â”‚
â”‚     â€¢ COPY INTO from Parquet                â€¢ COPY INTO from GZIP CSV                            â”‚
â”‚     â€¢ Incremental (customer_id)             â€¢ Incremental (transaction_id)                       â”‚
â”‚     â€¢ 50K rows                              â€¢ ~13.5M rows                                         â”‚
â”‚     â€¢ Audit metadata captured               â€¢ Audit metadata captured                            â”‚
â”‚                                                                                                   â”‚
â”‚  Usage: dbt run --select bronze.raw_customers bronze.raw_transactions                             â”‚
â”‚                                                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                            â†“
                                  dbt STAGING TRANSFORMATIONS
                                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ¥ˆ SILVER SCHEMA - Staging & Cleansing                                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                                   â”‚
â”‚  ğŸ“‹ STG_CUSTOMERS (VIEW)                 ğŸ“‹ STG_TRANSACTIONS (VIEW)                               â”‚
â”‚     â€¢ Data type casting                     â€¢ Data type casting                                  â”‚
â”‚     â€¢ Null handling                         â€¢ Deduplication                                      â”‚
â”‚     â€¢ Column standardization                â€¢ Status validation                                  â”‚
â”‚     â€¢ Business key generation               â€¢ Amount validation                                  â”‚
â”‚                                                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                            â†“
                                      dbt STAR SCHEMA BUILD
                                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ¥‡ GOLD SCHEMA - Analytics-Ready Star Schema                                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  DIMENSIONAL MODEL (Star Schema)                                                         â”‚    â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚  â”‚                                                                                          â”‚    â”‚
â”‚  â”‚  ğŸ“ DIM_CUSTOMER (SCD Type 2)           ğŸ“ DIM_DATE                                      â”‚    â”‚
â”‚  â”‚     â€¢ Customer attributes                  â€¢ ~580 days (18 months)                      â”‚    â”‚
â”‚  â”‚     â€¢ Slowly changing dimensions           â€¢ Date hierarchies                           â”‚    â”‚
â”‚  â”‚     â€¢ is_current flag tracking             â€¢ Business calendar                          â”‚    â”‚
â”‚  â”‚                                                                                          â”‚    â”‚
â”‚  â”‚  ğŸ“ DIM_MERCHANT_CATEGORY                                                                â”‚    â”‚
â”‚  â”‚     â€¢ 10-15 merchant categories                                                          â”‚    â”‚
â”‚  â”‚     â€¢ Category groups (Travel, Necessities, etc.)                                       â”‚    â”‚
â”‚  â”‚     â€¢ Spending type classification                                                      â”‚    â”‚
â”‚  â”‚                                                                                          â”‚    â”‚
â”‚  â”‚  ğŸ“Š FCT_TRANSACTIONS (Fact Table)                                                        â”‚    â”‚
â”‚  â”‚     â€¢ ~13.5M transaction records                                                         â”‚    â”‚
â”‚  â”‚     â€¢ Foreign keys to all dimensions                                                     â”‚    â”‚
â”‚  â”‚     â€¢ transaction_amount (measure)                                                       â”‚    â”‚
â”‚  â”‚     â€¢ Channel, status flags                                                              â”‚    â”‚
â”‚  â”‚                                                                                          â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  ANALYTICS MARTS & AGGREGATIONS                                                          â”‚    â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚  â”‚                                                                                          â”‚    â”‚
â”‚  â”‚  ğŸ¯ CUSTOMER_360_PROFILE (Denormalized View) â­ PRIMARY VIEW                             â”‚    â”‚
â”‚  â”‚     â€¢ 50,000 customer profiles with 40+ enriched attributes                             â”‚    â”‚
â”‚  â”‚                                                                                          â”‚    â”‚
â”‚  â”‚     IDENTIFIERS:                                                                         â”‚    â”‚
â”‚  â”‚       customer_id, customer_key, full_name, email                                       â”‚    â”‚
â”‚  â”‚                                                                                          â”‚    â”‚
â”‚  â”‚     DEMOGRAPHICS:                                                                        â”‚    â”‚
â”‚  â”‚       age, state, city, employment_status                                               â”‚    â”‚
â”‚  â”‚                                                                                          â”‚    â”‚
â”‚  â”‚     ACCOUNT DETAILS:                                                                     â”‚    â”‚
â”‚  â”‚       card_type, credit_limit, account_age_days, tenure_months                          â”‚    â”‚
â”‚  â”‚                                                                                          â”‚    â”‚
â”‚  â”‚     CUSTOMER SEGMENTATION:                                                               â”‚    â”‚
â”‚  â”‚       customer_segment (5 behavioral segments):                                          â”‚    â”‚
â”‚  â”‚         â€¢ High-Value Travelers                                                           â”‚    â”‚
â”‚  â”‚         â€¢ Declining                                                                      â”‚    â”‚
â”‚  â”‚         â€¢ New & Growing                                                                  â”‚    â”‚
â”‚  â”‚         â€¢ Budget-Conscious                                                               â”‚    â”‚
â”‚  â”‚         â€¢ Stable Mid-Spenders                                                            â”‚    â”‚
â”‚  â”‚                                                                                          â”‚    â”‚
â”‚  â”‚     LIFETIME METRICS:                                                                    â”‚    â”‚
â”‚  â”‚       lifetime_value, total_transactions, avg_spend_per_day                             â”‚    â”‚
â”‚  â”‚                                                                                          â”‚    â”‚
â”‚  â”‚     TRANSACTION VALUE STATISTICS:                                                        â”‚    â”‚
â”‚  â”‚       avg_transaction_value, min/max/median_transaction_value                           â”‚    â”‚
â”‚  â”‚       transaction_value_stddev, spending_consistency                                    â”‚    â”‚
â”‚  â”‚                                                                                          â”‚    â”‚
â”‚  â”‚     ROLLING 90-DAY WINDOWS:                                                              â”‚    â”‚
â”‚  â”‚       spend_last_90_days, spend_prior_90_days, spend_change_pct                         â”‚    â”‚
â”‚  â”‚       avg_monthly_spend                                                                  â”‚    â”‚
â”‚  â”‚                                                                                          â”‚    â”‚
â”‚  â”‚     RECENCY & ACTIVITY:                                                                  â”‚    â”‚
â”‚  â”‚       last_transaction_date, days_since_last_transaction                                â”‚    â”‚
â”‚  â”‚       recency_status (Active 30d, Recent 60d, At Risk 90d, Inactive 90+d)              â”‚    â”‚
â”‚  â”‚                                                                                          â”‚    â”‚
â”‚  â”‚     CATEGORY PREFERENCES:                                                                â”‚    â”‚
â”‚  â”‚       travel_spend_pct, necessities_spend_pct                                           â”‚    â”‚
â”‚  â”‚       spending_profile (Travel-Focused, Necessity-Focused, Balanced)                    â”‚    â”‚
â”‚  â”‚                                                                                          â”‚    â”‚
â”‚  â”‚     FINANCIAL HEALTH:                                                                    â”‚    â”‚
â”‚  â”‚       credit_utilization_pct (calculated metric)                                        â”‚    â”‚
â”‚  â”‚                                                                                          â”‚    â”‚
â”‚  â”‚     ML-POWERED CHURN RISK: âš ï¸                                                            â”‚    â”‚
â”‚  â”‚       churn_risk_score (0-100 from Snowflake Cortex ML)                                 â”‚    â”‚
â”‚  â”‚       churn_risk_category (High Risk 70+, Medium 40-69, Low <40)                        â”‚    â”‚
â”‚  â”‚       âš ï¸  Requires ML model training - may be NULL if not trained                        â”‚    â”‚
â”‚  â”‚                                                                                          â”‚    â”‚
â”‚  â”‚     CAMPAIGN ELIGIBILITY FLAGS:                                                          â”‚    â”‚
â”‚  â”‚       eligible_for_retention_campaign                                                   â”‚    â”‚
â”‚  â”‚       eligible_for_onboarding_campaign                                                  â”‚    â”‚
â”‚  â”‚       eligible_for_premium_campaign                                                     â”‚    â”‚
â”‚  â”‚                                                                                          â”‚    â”‚
â”‚  â”‚  ğŸ“Š CUSTOMER_SEGMENTS                                                                    â”‚    â”‚
â”‚  â”‚     â€¢ Segment definitions with thresholds                                               â”‚    â”‚
â”‚  â”‚     â€¢ Rolling 90-day behavioral metrics                                                 â”‚    â”‚
â”‚  â”‚                                                                                          â”‚    â”‚
â”‚  â”‚  ğŸ“ˆ METRIC_CUSTOMER_LTV                                                                  â”‚    â”‚
â”‚  â”‚     â€¢ Lifetime value calculations by customer                                           â”‚    â”‚
â”‚  â”‚                                                                                          â”‚    â”‚
â”‚  â”‚  ğŸ“Š METRIC_AVG_TRANSACTION_VALUE                                                         â”‚    â”‚
â”‚  â”‚     â€¢ Average transaction metrics                                                       â”‚    â”‚
â”‚  â”‚                                                                                          â”‚    â”‚
â”‚  â”‚  ğŸ“‰ METRIC_MOM_SPEND_CHANGE                                                              â”‚    â”‚
â”‚  â”‚     â€¢ Month-over-month spend trends                                                     â”‚    â”‚
â”‚  â”‚                                                                                          â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  MACHINE LEARNING (Snowflake Cortex ML)                                                  â”‚    â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚  â”‚                                                                                          â”‚    â”‚
â”‚  â”‚  ğŸ¤– CHURN_MODEL (Snowflake Cortex Classification)                                        â”‚    â”‚
â”‚  â”‚     â€¢ Trained on customer behavior features                                             â”‚    â”‚
â”‚  â”‚     â€¢ Predicts churn probability (0-100)                                                â”‚    â”‚
â”‚  â”‚                                                                                          â”‚    â”‚
â”‚  â”‚  ğŸ“‹ CHURN_LABELS                                                                         â”‚    â”‚
â”‚  â”‚     â€¢ Training data labels                                                              â”‚    â”‚
â”‚  â”‚                                                                                          â”‚    â”‚
â”‚  â”‚  ğŸ¯ CHURN_PREDICTIONS âš ï¸                                                                  â”‚    â”‚
â”‚  â”‚     â€¢ customer_id, churn_risk_score                                                     â”‚    â”‚
â”‚  â”‚     âš ï¸  Requires manual model training - may be empty initially                          â”‚    â”‚
â”‚  â”‚                                                                                          â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                            â†“
                                  SEMANTIC LAYER MAPPING
                                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“‹ SEMANTIC LAYER                                                                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                                   â”‚
â”‚  ğŸ“„ customer_analytics.yaml                                                                       â”‚
â”‚     Location: @SEMANTIC_MODELS.DEFINITIONS.SEMANTIC_STAGE/customer_analytics.yaml                â”‚
â”‚                                                                                                   â”‚
â”‚     LOGICAL TABLES DEFINED:                                                                       â”‚
â”‚                                                                                                   â”‚
â”‚     1ï¸âƒ£  customer_profile â†’ CUSTOMER_360_PROFILE                                                  â”‚
â”‚        â€¢ 30+ dimensions (customer_id, full_name, age, state, segment, etc.)                     â”‚
â”‚        â€¢ 15+ measures (lifetime_value, avg_transaction_value, churn_risk_score, etc.)           â”‚
â”‚                                                                                                   â”‚
â”‚     2ï¸âƒ£  transactions â†’ FCT_TRANSACTIONS                                                          â”‚
â”‚        â€¢ Dimensions: transaction_id, customer_key, merchant_name, channel, status               â”‚
â”‚        â€¢ Time dimension: transaction_date                                                        â”‚
â”‚        â€¢ Measures: transaction_amount, transaction_count                                         â”‚
â”‚                                                                                                   â”‚
â”‚     3ï¸âƒ£  merchant_categories â†’ DIM_MERCHANT_CATEGORY                                              â”‚
â”‚        â€¢ Dimensions: category_name, category_group, spending_type                               â”‚
â”‚        â€¢ 10-15 categories (Travel, Dining, Grocery, etc.)                                        â”‚
â”‚                                                                                                   â”‚
â”‚     BUSINESS DEFINITIONS:                                                                         â”‚
â”‚       â€¢ Natural language synonyms                                                                â”‚
â”‚       â€¢ Sample questions (~50 verified queries)                                                  â”‚
â”‚       â€¢ Column descriptions in business terms                                                    â”‚
â”‚                                                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                            â†“
                                  SNOWFLAKE CORTEX ANALYST
                                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ¤– SNOWFLAKE CORTEX AI ENGINE                                                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                                   â”‚
â”‚  ğŸ§  Cortex Analyst (Natural Language to SQL) âœ…                                                   â”‚
â”‚     API Endpoint: /api/v2/cortex/analyst/message                                                 â”‚
â”‚                                                                                                   â”‚
â”‚     CAPABILITIES:                                                                                 â”‚
â”‚       â€¢ Understands business questions in plain English                                          â”‚
â”‚       â€¢ Generates SQL from semantic model                                                        â”‚
â”‚       â€¢ Multi-turn conversation context (last 3 exchanges)                                       â”‚
â”‚       â€¢ Strict role alternation (user â†” analyst)                                                 â”‚
â”‚       â€¢ 50 second timeout for complex queries                                                    â”‚
â”‚                                                                                                   â”‚
â”‚     FALLBACK MECHANISM: âœ…                                                                        â”‚
â”‚       â€¢ Mock implementation with 5 pre-mapped question patterns                                  â”‚
â”‚       â€¢ Seamless error handling (API failures, timeouts)                                         â”‚
â”‚       â€¢ Debugging support (request ID tracking)                                                  â”‚
â”‚                                                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                            â†“
                                   STREAMLIT APPLICATION
                                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ¯ CUSTOMER-FACING ANALYTICS PLATFORM                                                            â”‚
â”‚  ğŸ“± Streamlit in Snowflake                                                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                                   â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“    â”‚
â”‚  â”ƒ  TAB 1: ğŸ” CUSTOMER 360 DEEP DIVE âœ…                                                     â”ƒ    â”‚
â”‚  â”£â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”«    â”‚
â”‚  â”ƒ                                                                                          â”ƒ    â”‚
â”‚  â”ƒ  ğŸ” MULTI-METHOD CUSTOMER SEARCH:                                                        â”ƒ    â”‚
â”‚  â”ƒ     â€¢ Search by Customer ID (1-100,000)                                                  â”ƒ    â”‚
â”‚  â”ƒ     â€¢ Search by Name (partial match, case-insensitive)                                   â”ƒ    â”‚
â”‚  â”ƒ     â€¢ Search by Email (partial match)                                                    â”ƒ    â”‚
â”‚  â”ƒ     â€¢ Multiple results: dropdown selector                                                â”ƒ    â”‚
â”‚  â”ƒ                                                                                          â”ƒ    â”‚
â”‚  â”ƒ  ğŸ“Š COMPREHENSIVE PROFILE DASHBOARD:                                                     â”ƒ    â”‚
â”‚  â”ƒ     â€¢ Customer header: Name, Email, Location, Segment                                    â”ƒ    â”‚
â”‚  â”ƒ     â€¢ Account metrics: Card Type, Credit Limit                                           â”ƒ    â”‚
â”‚  â”ƒ     â€¢ Churn risk alert (color-coded: ğŸ”´ High, ğŸŸ¡ Medium, ğŸŸ¢ Low)                        â”ƒ    â”‚
â”‚  â”ƒ                                                                                          â”ƒ    â”‚
â”‚  â”ƒ  ğŸ“ˆ KEY METRICS (8 Cards):                                                               â”ƒ    â”‚
â”‚  â”ƒ     â€¢ Lifetime Value                                                                     â”ƒ    â”‚
â”‚  â”ƒ     â€¢ Average Transaction                                                                â”ƒ    â”‚
â”‚  â”ƒ     â€¢ Spend (Last 90 Days)                                                               â”ƒ    â”‚
â”‚  â”ƒ     â€¢ Days Since Last Transaction                                                        â”ƒ    â”‚
â”‚  â”ƒ     â€¢ Spend Change (MoM) with trend indicator â†—ï¸â†˜ï¸                                       â”ƒ    â”‚
â”‚  â”ƒ     â€¢ Average Monthly Spend                                                              â”ƒ    â”‚
â”‚  â”ƒ                                                                                          â”ƒ    â”‚
â”‚  â”ƒ  ğŸ’³ TRANSACTION HISTORY:                                                                 â”ƒ    â”‚
â”‚  â”ƒ     â€¢ Up to 1,000 most recent transactions per customer                                  â”ƒ    â”‚
â”‚  â”ƒ     â€¢ FILTERS:                                                                           â”ƒ    â”‚
â”‚  â”ƒ       - Time Period: Last 30/90/180 days, All time                                       â”ƒ    â”‚
â”‚  â”ƒ       - Category: All + dynamic category list                                            â”ƒ    â”‚
â”‚  â”ƒ       - Status: All, Approved, Declined                                                  â”ƒ    â”‚
â”‚  â”ƒ     â€¢ COLUMNS (Human-Readable):                                                          â”ƒ    â”‚
â”‚  â”ƒ       - Transaction Date, Merchant Name, Category Name, Category Group                   â”ƒ    â”‚
â”‚  â”ƒ       - Transaction Amount (formatted $X,XXX.XX)                                         â”ƒ    â”‚
â”‚  â”ƒ       - Channel, Status                                                                  â”ƒ    â”‚
â”‚  â”ƒ                                                                                          â”ƒ    â”‚
â”‚  â”ƒ  ğŸ“Š INTERACTIVE VISUALIZATIONS:                                                          â”ƒ    â”‚
â”‚  â”ƒ     â€¢ Daily Spending Trend (Plotly line chart)                                           â”ƒ    â”‚
â”‚  â”ƒ     â€¢ Category Breakdown (Plotly pie chart)                                              â”ƒ    â”‚
â”‚  â”ƒ                                                                                          â”ƒ    â”‚
â”‚  â”ƒ  ğŸ“‹ SUMMARY STATISTICS:                                                                  â”ƒ    â”‚
â”‚  â”ƒ     â€¢ Total Transactions, Total Spend, Avg Transaction, Approval Rate                    â”ƒ    â”‚
â”‚  â”ƒ                                                                                          â”ƒ    â”‚
â”‚  â”ƒ  ğŸ“¥ CSV EXPORT:                                                                          â”ƒ    â”‚
â”‚  â”ƒ     â€¢ Human-readable column names                                                        â”ƒ    â”‚
â”‚  â”ƒ     â€¢ Timestamped filename: customer_{id}_transactions_YYYYMMDD.csv                      â”ƒ    â”‚
â”‚  â”ƒ                                                                                          â”ƒ    â”‚
â”‚  â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›    â”‚
â”‚                                                                                                   â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“    â”‚
â”‚  â”ƒ  TAB 2: ğŸ¯ SEGMENT EXPLORER âœ…                                                           â”ƒ    â”‚
â”‚  â”£â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”«    â”‚
â”‚  â”ƒ                                                                                          â”ƒ    â”‚
â”‚  â”ƒ  ğŸ” ADVANCED CUSTOMER SEGMENTATION:                                                      â”ƒ    â”‚
â”‚  â”ƒ     â€¢ Multi-select filters for precision targeting                                       â”ƒ    â”‚
â”‚  â”ƒ     â€¢ Up to 5,000 results per query                                                      â”ƒ    â”‚
â”‚  â”ƒ                                                                                          â”ƒ    â”‚
â”‚  â”ƒ  ğŸ›ï¸  FILTER OPTIONS:                                                                     â”ƒ    â”‚
â”‚  â”ƒ     â€¢ Customer Segment (multiselect):                                                    â”ƒ    â”‚
â”‚  â”ƒ       - High-Value Travelers                                                             â”ƒ    â”‚
â”‚  â”ƒ       - Stable Mid-Spenders                                                              â”ƒ    â”‚
â”‚  â”ƒ       - Budget-Conscious                                                                 â”ƒ    â”‚
â”‚  â”ƒ       - Declining                                                                        â”ƒ    â”‚
â”‚  â”ƒ       - New & Growing                                                                    â”ƒ    â”‚
â”‚  â”ƒ     â€¢ State (multiselect with "All")                                                     â”ƒ    â”‚
â”‚  â”ƒ     â€¢ Churn Risk: All, High Risk, Medium Risk, Low Risk                                  â”ƒ    â”‚
â”‚  â”ƒ     â€¢ Advanced Filters:                                                                  â”ƒ    â”‚
â”‚  â”ƒ       - Minimum Lifetime Value ($)                                                       â”ƒ    â”‚
â”‚  â”ƒ       - Card Type: All, Standard, Premium                                                â”ƒ    â”‚
â”‚  â”ƒ                                                                                          â”ƒ    â”‚
â”‚  â”ƒ  ğŸ“Š REAL-TIME SEGMENT METRICS:                                                           â”ƒ    â”‚
â”‚  â”ƒ     â€¢ Total Customers                                                                    â”ƒ    â”‚
â”‚  â”ƒ     â€¢ Total LTV (Lifetime Value)                                                         â”ƒ    â”‚
â”‚  â”ƒ     â€¢ Average LTV                                                                        â”ƒ    â”‚
â”‚  â”ƒ     â€¢ Average Churn Risk                                                                 â”ƒ    â”‚
â”‚  â”ƒ                                                                                          â”ƒ    â”‚
â”‚  â”ƒ  ğŸ“ˆ INTERACTIVE VISUALIZATIONS:                                                          â”ƒ    â”‚
â”‚  â”ƒ     â€¢ Segment Distribution (Plotly pie chart)                                            â”ƒ    â”‚
â”‚  â”ƒ     â€¢ Churn Risk Distribution (Plotly bar chart, color-coded)                            â”ƒ    â”‚
â”‚  â”ƒ     â€¢ Total LTV by Segment (Plotly bar chart)                                            â”ƒ    â”‚
â”‚  â”ƒ                                                                                          â”ƒ    â”‚
â”‚  â”ƒ  ğŸ“‹ CUSTOMER LIST TABLE:                                                                 â”ƒ    â”‚
â”‚  â”ƒ     â€¢ Columns: Customer Id, Full Name, Email, State, City, Customer Segment,             â”ƒ    â”‚
â”‚  â”ƒ               Card Type, Lifetime Value, Average Transaction Value,                      â”ƒ    â”‚
â”‚  â”ƒ               Churn Risk Category, Churn Risk Score, Days Since Last Transaction         â”ƒ    â”‚
â”‚  â”ƒ     â€¢ Formatted currency ($X,XXX) and percentage (XX.X%)                                 â”ƒ    â”‚
â”‚  â”ƒ     â€¢ Human-readable column headers                                                      â”ƒ    â”‚
â”‚  â”ƒ                                                                                          â”ƒ    â”‚
â”‚  â”ƒ  ğŸ“¥ SEGMENT EXPORT:                                                                      â”ƒ    â”‚
â”‚  â”ƒ     â€¢ CSV download for marketing campaigns                                               â”ƒ    â”‚
â”‚  â”ƒ     â€¢ Human-readable column names                                                        â”ƒ    â”‚
â”‚  â”ƒ     â€¢ Timestamped: customer_segment_YYYYMMDD_HHMMSS.csv                                  â”ƒ    â”‚
â”‚  â”ƒ                                                                                          â”ƒ    â”‚
â”‚  â”ƒ  ğŸ”„ ROADMAP FEATURES:                                                                    â”ƒ    â”‚
â”‚  â”ƒ     â€¢ Direct export to Salesforce (Coming Soon)                                          â”ƒ    â”‚
â”‚  â”ƒ     â€¢ Direct export to HubSpot (Coming Soon)                                             â”ƒ    â”‚
â”‚  â”ƒ     â€¢ Direct export to Google Ads (Coming Soon)                                          â”ƒ    â”‚
â”‚  â”ƒ                                                                                          â”ƒ    â”‚
â”‚  â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›    â”‚
â”‚                                                                                                   â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“    â”‚
â”‚  â”ƒ  TAB 3: ğŸ“ˆ CAMPAIGN PERFORMANCE SIMULATOR âœ…                                             â”ƒ    â”‚
â”‚  â”£â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”«    â”‚
â”‚  â”ƒ                                                                                          â”ƒ    â”‚
â”‚  â”ƒ  ğŸ¯ TARGET AUDIENCE BUILDER:                                                             â”ƒ    â”‚
â”‚  â”ƒ     â€¢ Multi-criteria filtering for precision targeting                                   â”ƒ    â”‚
â”‚  â”ƒ     â€¢ Real-time audience size calculation                                                â”ƒ    â”‚
â”‚  â”ƒ                                                                                          â”ƒ    â”‚
â”‚  â”ƒ  ğŸ›ï¸  TARGETING FILTERS:                                                                  â”ƒ    â”‚
â”‚  â”ƒ     â€¢ Customer Segments (multiselect)                                                    â”ƒ    â”‚
â”‚  â”ƒ     â€¢ Churn Risk Levels (multiselect: High, Medium, Low)                                 â”ƒ    â”‚
â”‚  â”ƒ     â€¢ Card Types (multiselect: Standard, Premium)                                        â”ƒ    â”‚
â”‚  â”ƒ     â€¢ Advanced Filters:                                                                  â”ƒ    â”‚
â”‚  â”ƒ       - Minimum Lifetime Value ($)                                                       â”ƒ    â”‚
â”‚  â”ƒ       - Minimum Churn Risk Score (0-100)                                                 â”ƒ    â”‚
â”‚  â”ƒ                                                                                          â”ƒ    â”‚
â”‚  â”ƒ  ğŸ’° CONFIGURABLE CAMPAIGN PARAMETERS:                                                    â”ƒ    â”‚
â”‚  â”ƒ     â€¢ Incentive per Customer ($0-$500)                                                   â”ƒ    â”‚
â”‚  â”ƒ     â€¢ Expected Retention Rate (0-100%)                                                   â”ƒ    â”‚
â”‚  â”ƒ     â€¢ Campaign Cost per Customer ($0-$100)                                               â”ƒ    â”‚
â”‚  â”ƒ                                                                                          â”ƒ    â”‚
â”‚  â”ƒ  ğŸ“Š ROI CALCULATOR:                                                                      â”ƒ    â”‚
â”‚  â”ƒ     METRICS CALCULATED:                                                                  â”ƒ    â”‚
â”‚  â”ƒ       â€¢ Total Cost (Incentives + Operations)                                             â”ƒ    â”‚
â”‚  â”ƒ       â€¢ Expected Retained Customers                                                      â”ƒ    â”‚
â”‚  â”ƒ       â€¢ Expected Retained Value (20% of LTV as annual proxy)                             â”ƒ    â”‚
â”‚  â”ƒ       â€¢ Net Benefit ($)                                                                  â”ƒ    â”‚
â”‚  â”ƒ       â€¢ ROI Percentage                                                                   â”ƒ    â”‚
â”‚  â”ƒ       â€¢ Cost per Retained Customer                                                       â”ƒ    â”‚
â”‚  â”ƒ                                                                                          â”ƒ    â”‚
â”‚  â”ƒ  ğŸ“ˆ VISUALIZATIONS:                                                                      â”ƒ    â”‚
â”‚  â”ƒ     â€¢ Campaign Metrics (4 cards with trend indicators)                                   â”ƒ    â”‚
â”‚  â”ƒ     â€¢ Cost Breakdown (Plotly pie chart: Incentives vs Operations)                        â”ƒ    â”‚
â”‚  â”ƒ     â€¢ Expected Value Summary                                                             â”ƒ    â”‚
â”‚  â”ƒ                                                                                          â”ƒ    â”‚
â”‚  â”ƒ  ğŸ”¬ SENSITIVITY ANALYSIS:                                                                â”ƒ    â”‚
â”‚  â”ƒ     â€¢ ROI vs Retention Rate (10%-80%, 10% increments)                                    â”ƒ    â”‚
â”‚  â”ƒ     â€¢ Interactive Plotly line chart with zero line                                       â”ƒ    â”‚
â”‚  â”ƒ     â€¢ Breakeven point calculation & display                                              â”ƒ    â”‚
â”‚  â”ƒ     â€¢ "What-if" scenario modeling                                                        â”ƒ    â”‚
â”‚  â”ƒ                                                                                          â”ƒ    â”‚
â”‚  â”ƒ  ğŸ“‹ TARGET CUSTOMER LIST:                                                                â”ƒ    â”‚
â”‚  â”ƒ     â€¢ Preview: Top 10 highest churn risk customers                                       â”ƒ    â”‚
â”‚  â”ƒ     â€¢ Sorted by churn_risk_score DESC, lifetime_value DESC                               â”ƒ    â”‚
â”‚  â”ƒ     â€¢ Human-readable column names                                                        â”ƒ    â”‚
â”‚  â”ƒ                                                                                          â”ƒ    â”‚
â”‚  â”ƒ  ğŸ“¥ CAMPAIGN EXPORT:                                                                     â”ƒ    â”‚
â”‚  â”ƒ     â€¢ Full target list CSV download                                                      â”ƒ    â”‚
â”‚  â”ƒ     â€¢ Timestamped: campaign_targets_YYYYMMDD_HHMMSS.csv                                  â”ƒ    â”‚
â”‚  â”ƒ                                                                                          â”ƒ    â”‚
â”‚  â”ƒ  ğŸ’¡ CAMPAIGN RECOMMENDATIONS:                                                            â”ƒ    â”‚
â”‚  â”ƒ     â€¢ ROI assessment & breakeven rate                                                    â”ƒ    â”‚
â”‚  â”ƒ     â€¢ Targeting best practices                                                           â”ƒ    â”‚
â”‚  â”ƒ     â€¢ Messaging suggestions                                                              â”ƒ    â”‚
â”‚  â”ƒ     â€¢ Timing recommendations                                                             â”ƒ    â”‚
â”‚  â”ƒ     â€¢ Success metrics to track                                                           â”ƒ    â”‚
â”‚  â”ƒ                                                                                          â”ƒ    â”‚
â”‚  â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›    â”‚
â”‚                                                                                                   â”‚
â”‚  â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“    â”‚
â”‚  â”ƒ  TAB 4: ğŸ¤– AI ASSISTANT (Powered by Cortex Analyst) âœ…                                   â”ƒ    â”‚
â”‚  â”£â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”«    â”‚
â”‚  â”ƒ                                                                                          â”ƒ    â”‚
â”‚  â”ƒ  ğŸ§  NATURAL LANGUAGE QUERY INTERFACE:                                                    â”ƒ    â”‚
â”‚  â”ƒ     â€¢ Ask questions in plain English                                                     â”ƒ    â”‚
â”‚  â”ƒ     â€¢ No SQL knowledge required                                                          â”ƒ    â”‚
â”‚  â”ƒ     â€¢ Real-time SQL generation & execution                                               â”ƒ    â”‚
â”‚  â”ƒ                                                                                          â”ƒ    â”‚
â”‚  â”ƒ  ğŸ’¡ SUGGESTED QUESTIONS (5 Categories):                                                  â”ƒ    â”‚
â”‚  â”ƒ     ğŸ“Š Churn Analysis (4 questions):                                                     â”ƒ    â”‚
â”‚  â”ƒ        â€¢ Which customers are at highest risk of churning?                                â”ƒ    â”‚
â”‚  â”ƒ        â€¢ What is the average churn risk score by segment?                                â”ƒ    â”‚
â”‚  â”ƒ        â€¢ Show me High-Value Travelers with high churn risk                               â”ƒ    â”‚
â”‚  â”ƒ        â€¢ Which states have the highest churn risk?                                       â”ƒ    â”‚
â”‚  â”ƒ                                                                                          â”ƒ    â”‚
â”‚  â”ƒ     ğŸ‘¥ Customer Segmentation (4 questions):                                              â”ƒ    â”‚
â”‚  â”ƒ        â€¢ How many customers are in each segment?                                         â”ƒ    â”‚
â”‚  â”ƒ        â€¢ Compare lifetime value across segments                                          â”ƒ    â”‚
â”‚  â”ƒ        â€¢ Which segments have Premium cards?                                              â”ƒ    â”‚
â”‚  â”ƒ        â€¢ Show me Declining segment customers in California                               â”ƒ    â”‚
â”‚  â”ƒ                                                                                          â”ƒ    â”‚
â”‚  â”ƒ     ğŸ’° Spending Trends (4 questions):                                                    â”ƒ    â”‚
â”‚  â”ƒ        â€¢ What is the total spending in the last 90 days?                                 â”ƒ    â”‚
â”‚  â”ƒ        â€¢ Show spending trends in travel over last 6 months                               â”ƒ    â”‚
â”‚  â”ƒ        â€¢ Which customers increased spending the most?                                    â”ƒ    â”‚
â”‚  â”ƒ        â€¢ What is the average transaction value by card type?                             â”ƒ    â”‚
â”‚  â”ƒ                                                                                          â”ƒ    â”‚
â”‚  â”ƒ     ğŸ—ºï¸  Geographic Analysis (4 questions):                                               â”ƒ    â”‚
â”‚  â”ƒ        â€¢ What is the average lifetime value by state?                                    â”ƒ    â”‚
â”‚  â”ƒ        â€¢ Which states have the most Premium cardholders?                                 â”ƒ    â”‚
â”‚  â”ƒ        â€¢ Show me customer distribution across states                                     â”ƒ    â”‚
â”‚  â”ƒ        â€¢ Compare spending between California and Texas                                   â”ƒ    â”‚
â”‚  â”ƒ                                                                                          â”ƒ    â”‚
â”‚  â”ƒ     ğŸ¯ Campaign Targeting (4 questions):                                                 â”ƒ    â”‚
â”‚  â”ƒ        â€¢ Show me customers eligible for retention campaigns                              â”ƒ    â”‚
â”‚  â”ƒ        â€¢ Which Premium cardholders are at medium or high risk?                           â”ƒ    â”‚
â”‚  â”ƒ        â€¢ Find customers with declining spend in the last 90 days                         â”ƒ    â”‚
â”‚  â”ƒ        â€¢ Show high-value customers with low recent activity                              â”ƒ    â”‚
â”‚  â”ƒ                                                                                          â”ƒ    â”‚
â”‚  â”ƒ  ğŸ”„ MULTI-TURN CONVERSATIONS:                                                            â”ƒ    â”‚
â”‚  â”ƒ     â€¢ Context-aware: remembers last 3 exchanges                                          â”ƒ    â”‚
â”‚  â”ƒ     â€¢ Follow-up questions supported                                                      â”ƒ    â”‚
â”‚  â”ƒ     â€¢ Strict role alternation (user â†” analyst)                                           â”ƒ    â”‚
â”‚  â”ƒ     â€¢ Only successful responses added to context                                         â”ƒ    â”‚
â”‚  â”ƒ                                                                                          â”ƒ    â”‚
â”‚  â”ƒ  ğŸ” TRANSPARENT SQL GENERATION:                                                          â”ƒ    â”‚
â”‚  â”ƒ     â€¢ View generated SQL (expandable section)                                            â”ƒ    â”‚
â”‚  â”ƒ     â€¢ AI interpretation of results                                                       â”ƒ    â”‚
â”‚  â”ƒ     â€¢ Debug info (request ID) for troubleshooting                                        â”ƒ    â”‚
â”‚  â”ƒ                                                                                          â”ƒ    â”‚
â”‚  â”ƒ  ğŸ“Š SMART RESULT FORMATTING:                                                             â”ƒ    â”‚
â”‚  â”ƒ     â€¢ Metric cards for small result sets (<20 rows, â‰¤5 columns)                          â”ƒ    â”‚
â”‚  â”ƒ     â€¢ Human-readable column names                                                        â”ƒ    â”‚
â”‚  â”ƒ     â€¢ Auto-formatting: Currency ($X,XXX), Counts (X,XXX)                                 â”ƒ    â”‚
â”‚  â”ƒ     â€¢ Interactive data tables (up to 400px height)                                       â”ƒ    â”‚
â”‚  â”ƒ                                                                                          â”ƒ    â”‚
â”‚  â”ƒ  ğŸ“œ QUERY HISTORY:                                                                       â”ƒ    â”‚
â”‚  â”ƒ     â€¢ Last 5 queries displayed                                                           â”ƒ    â”‚
â”‚  â”ƒ     â€¢ Timestamp, question, SQL, results                                                  â”ƒ    â”‚
â”‚  â”ƒ     â€¢ Expandable for easy reference                                                      â”ƒ    â”‚
â”‚  â”ƒ     â€¢ Reusable results without re-querying                                               â”ƒ    â”‚
â”‚  â”ƒ                                                                                          â”ƒ    â”‚
â”‚  â”ƒ  ğŸ“¥ EXPORT QUERY RESULTS:                                                                â”ƒ    â”‚
â”‚  â”ƒ     â€¢ CSV download with human-readable columns                                           â”ƒ    â”‚
â”‚  â”ƒ     â€¢ Timestamped: cortex_analyst_results_YYYYMMDD_HHMMSS.csv                            â”ƒ    â”‚
â”‚  â”ƒ                                                                                          â”ƒ    â”‚
â”‚  â”ƒ  ğŸ›¡ï¸  ROBUST ERROR HANDLING:                                                              â”ƒ    â”‚
â”‚  â”ƒ     â€¢ Primary: Cortex Analyst REST API                                                   â”ƒ    â”‚
â”‚  â”ƒ     â€¢ Fallback: Mock implementation (5 pre-mapped patterns)                              â”ƒ    â”‚
â”‚  â”ƒ     â€¢ Graceful degradation on API failures                                               â”ƒ    â”‚
â”‚  â”ƒ     â€¢ Troubleshooting tips displayed                                                     â”ƒ    â”‚
â”‚  â”ƒ                                                                                          â”ƒ    â”‚
â”‚  â”ƒ  â„¹ï¸  HELP & GUIDANCE:                                                                    â”ƒ    â”‚
â”‚  â”ƒ     â€¢ Tips for asking effective questions                                                â”ƒ    â”‚
â”‚  â”ƒ     â€¢ Domain term glossary                                                               â”ƒ    â”‚
â”‚  â”ƒ     â€¢ Time period syntax examples                                                        â”ƒ    â”‚
â”‚  â”ƒ     â€¢ Comparison & filter guidance                                                       â”ƒ    â”‚
â”‚  â”ƒ                                                                                          â”ƒ    â”‚
â”‚  â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›    â”‚
â”‚                                                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âœ¨ CROSS-CUTTING FEATURES (All Tabs)                                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                                   â”‚
â”‚  ğŸ“ HUMAN-READABLE DATA FORMATTING:                                                               â”‚
â”‚     â€¢ Column name transformation:                                                                â”‚
â”‚       - customer_id â†’ Customer Id                                                                â”‚
â”‚       - transaction_date â†’ Transaction Date                                                      â”‚
â”‚       - days_since_last_transaction â†’ Days Since Last Transaction                                â”‚
â”‚                                                                                                   â”‚
â”‚     â€¢ Acronym expansion:                                                                         â”‚
â”‚       - ltv â†’ Lifetime Value                                                                     â”‚
â”‚       - roi â†’ Return On Investment                                                               â”‚
â”‚       - avg â†’ Average                                                                            â”‚
â”‚       - pct â†’ Percent                                                                            â”‚
â”‚                                                                                                   â”‚
â”‚     â€¢ Value formatting:                                                                          â”‚
â”‚       - Currency: $X,XXX.XX                                                                      â”‚
â”‚       - Percentages: XX.X%                                                                       â”‚
â”‚       - Dates: YYYY-MM-DD                                                                        â”‚
â”‚       - Large numbers: X,XXX                                                                     â”‚
â”‚                                                                                                   â”‚
â”‚  ğŸ“¥ CSV EXPORTS:                                                                                  â”‚
â”‚     â€¢ All exports use human-readable column names                                                â”‚
â”‚     â€¢ Business-friendly headers (not database column names)                                      â”‚
â”‚     â€¢ Timestamped filenames for organization                                                     â”‚
â”‚     â€¢ Ready for use in Excel, CRM systems, marketing platforms                                   â”‚
â”‚                                                                                                   â”‚
â”‚  ğŸ¨ INTERACTIVE VISUALIZATIONS:                                                                   â”‚
â”‚     â€¢ Plotly charts (line, bar, pie)                                                             â”‚
â”‚     â€¢ Responsive design (use_container_width=True)                                               â”‚
â”‚     â€¢ Color-coded risk levels (ğŸ”´ red, ğŸŸ¡ yellow, ğŸŸ¢ green)                                     â”‚
â”‚     â€¢ Hover tooltips with detailed info                                                          â”‚
â”‚                                                                                                   â”‚
â”‚  âš¡ REAL-TIME DATA:                                                                               â”‚
â”‚     â€¢ Direct queries to Snowflake GOLD schema                                                    â”‚
â”‚     â€¢ No caching (always fresh data)                                                             â”‚
â”‚     â€¢ Connection pooling for performance                                                         â”‚
â”‚                                                                                                   â”‚
â”‚  ğŸ“± RESPONSIVE UI:                                                                                â”‚
â”‚     â€¢ Wide layout for dashboard experience                                                       â”‚
â”‚     â€¢ Collapsible sections for advanced features                                                 â”‚
â”‚     â€¢ Sticky headers and navigation                                                              â”‚
â”‚                                                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Business Value Delivered

### ğŸ’¼ For Marketing Teams
- **Retention Campaigns**: Identify at-risk customers with ML-powered churn scores
- **Segment Targeting**: Export customer lists for personalized outreach
- **ROI Optimization**: Model campaign performance before deployment
- **Multi-Channel Activation**: CSV exports ready for CRM/marketing platforms

### ğŸ“ˆ For Analytics Teams
- **Self-Service Analysis**: Natural language queries eliminate SQL bottlenecks
- **Deep Customer Insights**: 360Â° profiles with 40+ enriched attributes
- **Ad-Hoc Exploration**: Flexible filtering across segments, geography, behavior
- **Trend Analysis**: Rolling 90-day windows, MoM comparisons, category breakdowns

### ğŸ’° For Business Leaders
- **Customer Lifetime Value**: Track $X million in LTV across 50K customers
- **Churn Risk Monitoring**: Real-time alerts on high-risk customers
- **Data-Driven Decisions**: Campaign simulator with sensitivity analysis
- **Executive Dashboards**: Key metrics, visualizations, export capabilities

---

## Technology Stack

| Layer | Technology | Purpose |
|-------|-----------|---------|
| **Data Platform** | Snowflake | Cloud data warehouse & processing |
| **Data Generation** | Snowpark Python | Synthetic customer data generation (in-database) |
| **Data Ingestion** | S3 + COPY INTO | Bulk transaction data loading |
| **Data Transformation** | dbt | SQL-based ELT pipeline (Bronze â†’ Silver â†’ Gold) |
| **Machine Learning** | Snowflake Cortex ML | Churn prediction classification model |
| **AI/NLP** | Snowflake Cortex Analyst | Natural language to SQL translation |
| **Semantic Layer** | YAML | Business definitions for Cortex Analyst |
| **Application** | Streamlit in Snowflake | Interactive analytics UI |
| **Visualization** | Plotly | Interactive charts (line, bar, pie) |
| **Data Processing** | Python + Pandas | Data manipulation & formatting |

---

## Data Specifications

| Metric | Value |
|--------|-------|
| **Customers** | 50,000 |
| **Transactions** | ~13.5 million |
| **Transaction History** | 18 months |
| **Merchant Categories** | 10-15 |
| **Customer Segments** | 5 behavioral segments |
| **Date Range** | ~580 days |
| **Approval Rate** | ~97% |
| **Data Refresh** | Static dataset (one-time load) |

---

## Deployment Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Snowflake Account                                  â”‚
â”‚                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  Database: CUSTOMER_ANALYTICS              â”‚    â”‚
â”‚  â”‚                                            â”‚    â”‚
â”‚  â”‚  â€¢ BRONZE Schema (Raw tables)              â”‚    â”‚
â”‚  â”‚  â€¢ SILVER Schema (Staging views)           â”‚    â”‚
â”‚  â”‚  â€¢ GOLD Schema (Analytics tables/views)    â”‚    â”‚
â”‚  â”‚  â€¢ OBSERVABILITY Schema (Metadata)         â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  Database: SEMANTIC_MODELS                 â”‚    â”‚
â”‚  â”‚                                            â”‚    â”‚
â”‚  â”‚  â€¢ DEFINITIONS Schema                      â”‚    â”‚
â”‚  â”‚  â€¢ @SEMANTIC_STAGE (YAML files)            â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  Cortex Services                           â”‚    â”‚
â”‚  â”‚                                            â”‚    â”‚
â”‚  â”‚  â€¢ Cortex ML (Churn model)                 â”‚    â”‚
â”‚  â”‚  â€¢ Cortex Analyst (NL to SQL)              â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  Streamlit App                             â”‚    â”‚
â”‚  â”‚                                            â”‚    â”‚
â”‚  â”‚  â€¢ Native Snowflake deployment             â”‚    â”‚
â”‚  â”‚  â€¢ Auto-authentication                     â”‚    â”‚
â”‚  â”‚  â€¢ Access to all Cortex services           â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Status Legend

| Icon | Meaning |
|------|---------|
| âœ… | Fully operational & tested |
| âš ï¸ | Conditional (requires setup/training) |
| ğŸ”„ | Roadmap/Coming Soon |
| âŒ | Not implemented |

---

## Current Operational Status

### âœ… Production-Ready Components
- [x] Database schema (BRONZE â†’ SILVER â†’ GOLD)
- [x] dbt Bronze models (raw_customers, raw_transactions)
- [x] Snowpark customer generation procedure
- [x] Internal & external stages configured
- [x] CUSTOMER_360_PROFILE view (40+ columns)
- [x] Semantic layer (customer_analytics.yaml)
- [x] Streamlit app (all 4 tabs)
- [x] Cortex Analyst integration (with fallback)
- [x] Campaign simulator with ROI calculator
- [x] Human-readable column formatting
- [x] CSV exports for all tabs
- [x] Interactive visualizations

### âš ï¸ Requires Setup
- [ ] ML churn model training (code exists, needs execution)
- [ ] CHURN_PREDICTIONS table population (depends on model training)
- [ ] Cortex Analyst API access verification

### ğŸ”„ Roadmap Features
- [ ] External CRM integrations (Salesforce, HubSpot, Google Ads)
- [ ] Real-time data refresh (currently static dataset)
- [ ] Incremental data loading
- [ ] Additional ML models (propensity to buy, CLV forecasting)

---

## Quick Start Guide

### For End Users:
1. **Customer 360**: Search for customers by ID, name, or email
2. **Segment Explorer**: Filter customers by segment, state, churn risk, LTV
3. **Campaign Simulator**: Model retention campaigns with ROI analysis
4. **AI Assistant**: Ask questions in plain English

### For Data Engineers (Setup):
1. **Generate Customer Data**: `CALL BRONZE.GENERATE_CUSTOMERS(50000, 42);`
2. **Load Bronze Layer**: `dbt run --select bronze`
3. **Build Full Pipeline**: `dbt run`
4. **Run Tests**: `dbt test`
5. **Train ML Model**: Execute churn model training scripts (optional)
6. **Verify Cortex Analyst**: Check API access and semantic model deployment

### For Administrators:
1. Monitor query performance in OBSERVABILITY schema
2. Update semantic model as business definitions evolve
3. Manage user roles and permissions
4. Schedule dbt runs for incremental loads (if needed)

---

**Last Updated**: 2025-11-17
**Version**: 1.0
**Maintained By**: Data Analytics Team
